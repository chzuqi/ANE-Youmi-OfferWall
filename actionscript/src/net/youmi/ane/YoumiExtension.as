package net.youmi.ane{	import flash.events.EventDispatcher;	import flash.events.StatusEvent;	import flash.external.ExtensionContext;
		/**	 * 有米ANE	 * 	 * @author czq	 * 	 */		[Event(name="status", type="flash.events.StatusEvent")]	public class YoumiExtension extends EventDispatcher	{		private static var _extContext:ExtensionContext;				private static var EXTENSION_ID:String = 'net.youmi.extension';				//与java端中Map里的key一致		private static const YMsetUserId:String = "setUserId";		private static const YMinit:String = "init";		private static const YMshowOfferWall:String = "showOfferWall";		private static const YMshowSpot:String = "showSpot";				private static const YMqueryPoint:String = "queryPoint";		private static const YMspendPoints:String = "spendPoints";		public function YoumiExtension()		{					}				private static var _instance:YoumiExtension;				public static function getInstance():YoumiExtension		{			if (!_instance)			{				_instance = new YoumiExtension();				_extContext=ExtensionContext.createExtensionContext(EXTENSION_ID, null);				_extContext.addEventListener(StatusEvent.STATUS, onStatus);				if (!_extContext)				{					trace("extension.xml出错啦！！！！请对应上EXTENSION_ID是否与extenion.xml里的id想同");				}				else				{					trace(EXTENSION_ID, " extension creation complete");				}			}			return _instance;		}				private static function onStatus(e:StatusEvent):void		{			_instance.dispatchEvent(e);		}				/**		 * 设置用户id（通常不需要执行） 		 * @param userId		 * 		 */					public static function YoumiSetUserId(userId:String):void		{			getInstance();			if (_extContext){				_extContext.call(YMsetUserId, userId);			}		}				/**		 * 有米初始化  		 * @param appid		 * @param appsecret		 * 		 */			public static function YoumiInit(appid:String, appsecret:String):void		{			getInstance();			if (_extContext){				_extContext.call(YMinit, appid, appsecret);			}		}				/**		 * 显示积分墙 		 * @param offer （1为积分墙，0为展示墙）		 * 		 */				public static function YoumiShowOfferWall(offer:int = 1):void		{			if (_extContext){				_extContext.call(YMshowOfferWall, offer);			}		}				/**		 * 显示插屏广告 		 * 		 */				public static function YoumiShowSpot():void		{			if (_extContext){				_extContext.call(YMshowSpot);			}		}				/**		 * 扣除积分 		 * @param point		 * 		 */				public static function YoumiSpendPoints(point:int):void		{			if (_extContext){				_extContext.call(YMspendPoints, point);			}		}				/**		 * 查询积分 		 * 		 */			public static function YoumiQueryPoint():int		{			if (_extContext){				return _extContext.call(YMqueryPoint) as int;			}else			{				return 0;			}		}	}}